<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPG Product Rush</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Press Start 2P', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: white;
        }
        
        #gameContainer {
            background: #1a1a2e;
            border: 8px solid #eee;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        h1 {
            font-size: 20px;
            text-align: center;
            margin: 0 0 10px 0;
            color: #ffdd00;
            text-shadow: 4px 4px 0px #ff6b6b;
        }
        
        #subtitle {
            font-size: 8px;
            text-align: center;
            margin-bottom: 20px;
            color: #aaa;
        }
        
        canvas {
            display: block;
            background: #0f3460;
            border: 4px solid #16213e;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
        
        #score {
            font-size: 16px;
            text-align: center;
            margin-top: 15px;
            color: #ffdd00;
        }
        
        #instructions {
            font-size: 10px;
            text-align: center;
            margin-top: 15px;
            line-height: 1.6;
            color: #ccc;
        }
        
        #gameOver {
            display: none;
            text-align: center;
            margin-top: 15px;
        }
        
        button {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            padding: 15px 30px;
            background: #ff6b6b;
            color: white;
            border: 4px solid #fff;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.2s;
        }
        
        button:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
        
        button:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1>üõí CPG PRODUCT RUSH üõí</h1>
        <div id="subtitle">Powered by Contentful</div>
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <div id="score">SCORE: 0 | LIVES: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div id="instructions">
            ‚Üê ‚Üí Arrow Keys to Move | Catch the Products! | Avoid the Expired Items! ‚ò†Ô∏è
        </div>
        <div id="gameOver">
            <div style="font-size: 20px; color: #ff6b6b; margin-bottom: 15px;">GAME OVER!</div>
            <button onclick="restartGame()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Game variables
        let score = 0;
        let lives = 3;
        let gameRunning = true;
        let basketX = canvas.width / 2 - 40;
        const basketY = canvas.height - 60;
        const basketWidth = 80;
        const basketHeight = 40;
        let basketSpeed = 8;
        
        // Keyboard controls
        const keys = {};
        
        // Falling items
        let items = [];
        let itemSpawnTimer = 0;
        const itemSpawnRate = 60; // Spawn every 60 frames
        
        // CPG Product types (good items)
        const productTypes = [
            { emoji: 'ü•´', name: 'Canned Goods', points: 10 },
            { emoji: 'ü•õ', name: 'Dairy', points: 10 },
            { emoji: 'üçû', name: 'Bread', points: 10 },
            { emoji: 'üßÉ', name: 'Beverages', points: 10 },
            { emoji: 'üß¥', name: 'Personal Care', points: 15 },
            { emoji: 'üßº', name: 'Cleaning', points: 15 },
            { emoji: '‚òï', name: 'Coffee', points: 20 },
            { emoji: 'üç™', name: 'Snacks', points: 20 }
        ];
        
        // Bad items (expired products)
        const badItem = { emoji: '‚ò†Ô∏è', name: 'Expired!', points: -1 };
        
        // Listen for keyboard input
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        // Create a falling item
        function createItem() {
            const isBad = Math.random() < 0.2; // 20% chance of bad item
            const item = isBad ? badItem : productTypes[Math.floor(Math.random() * productTypes.length)];
            
            items.push({
                x: Math.random() * (canvas.width - 40),
                y: -40,
                width: 40,
                height: 40,
                speed: 2 + Math.random() * 2,
                type: item,
                isBad: isBad
            });
        }
        
        // Draw the basket (shopping cart)
        function drawBasket() {
            // Cart body - pixelated style
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(basketX, basketY, basketWidth, basketHeight);
            
            // Cart grid pattern
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            for (let i = 0; i < 4; i++) {
                ctx.beginPath();
                ctx.moveTo(basketX + i * 20, basketY);
                ctx.lineTo(basketX + i * 20, basketY + basketHeight);
                ctx.stroke();
            }
            
            // Wheels
            ctx.fillStyle = '#333';
            ctx.fillRect(basketX + 15, basketY + basketHeight, 12, 12);
            ctx.fillRect(basketX + 53, basketY + basketHeight, 12, 12);
            
            // Handle
            ctx.strokeStyle = '#ff6b6b';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(basketX + basketWidth, basketY + 10);
            ctx.lineTo(basketX + basketWidth + 10, basketY - 10);
            ctx.stroke();
        }
        
        // Draw falling items
        function drawItems() {
            items.forEach(item => {
                // Draw shadow
                ctx.fillStyle = 'rgba(0,0,0,0.2)';
                ctx.fillRect(item.x + 5, item.y + 5, item.width, item.height);
                
                // Draw item box
                ctx.fillStyle = item.isBad ? '#333' : '#fff';
                ctx.fillRect(item.x, item.y, item.width, item.height);
                
                // Draw emoji
                ctx.font = '30px Arial';
                ctx.fillText(item.type.emoji, item.x + 5, item.y + 32);
            });
        }
        
        // Update game state
        function update() {
            if (!gameRunning) return;
            
            // Move basket
            if (keys['ArrowLeft'] && basketX > 0) {
                basketX -= basketSpeed;
            }
            if (keys['ArrowRight'] && basketX < canvas.width - basketWidth) {
                basketX += basketSpeed;
            }
            
            // Spawn items
            itemSpawnTimer++;
            if (itemSpawnTimer >= itemSpawnRate) {
                createItem();
                itemSpawnTimer = 0;
            }
            
            // Update items
            items.forEach((item, index) => {
                item.y += item.speed;
                
                // Check collision with basket
                if (item.y + item.height >= basketY &&
                    item.y <= basketY + basketHeight &&
                    item.x + item.width >= basketX &&
                    item.x <= basketX + basketWidth) {
                    
                    if (item.isBad) {
                        lives--;
                        if (lives <= 0) {
                            gameOver();
                        }
                    } else {
                        score += item.type.points;
                    }
                    items.splice(index, 1);
                }
                
                // Remove items that fell off screen
                if (item.y > canvas.height) {
                    items.splice(index, 1);
                }
            });
            
            // Update score display
            const hearts = '‚ù§Ô∏è'.repeat(lives);
            document.getElementById('score').textContent = `SCORE: ${score} | LIVES: ${hearts}`;
        }
        
        // Draw everything
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#0f3460';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw shelves in background
            ctx.strokeStyle = '#1a4d7a';
            ctx.lineWidth = 2;
            for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                ctx.moveTo(0, i * 80);
                ctx.lineTo(canvas.width, i * 80);
                ctx.stroke();
            }
            
            drawItems();
            drawBasket();
        }
        
        // Game loop
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            document.getElementById('gameOver').style.display = 'block';
        }
        
        // Restart game
        function restartGame() {
            score = 0;
            lives = 3;
            items = [];
            gameRunning = true;
            basketX = canvas.width / 2 - 40;
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('score').textContent = `SCORE: ${score} | LIVES: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è`;
        }
        
        // Start the game
        gameLoop();
    </script>
</body>
</html>